# ğŸš€ CONT-AI - Sistema de GestÃ£o ContÃ¡bil com IA# ğŸš€ CONT-AI - Sistema de GestÃ£o ContÃ¡bil com IA# ğŸ“Š CONT-AI - Sistema de GestÃ£o ContÃ¡bil e Financeira com IA



Sistema completo de gestÃ£o contÃ¡bil e fiscal com processamento inteligente de documentos e anÃ¡lise tributÃ¡ria automatizada.



## ğŸ“‹ ÃndiceSistema completo de gestÃ£o contÃ¡bil e fiscal com processamento inteligente de documentos e anÃ¡lise tributÃ¡ria automatizada.Sistema completo de gestÃ£o contÃ¡bil e financeira com agentes de IA especializados, desenvolvido para oferecer uma visÃ£o integrada entre os aspectos financeiros (fluxo de caixa, pagamentos, recebimentos) e contÃ¡beis (DRE, plano de contas, obrigaÃ§Ãµes fiscais) do negÃ³cio.



- [CaracterÃ­sticas](#-caracterÃ­sticas)

- [Tecnologias](#-tecnologias)

- [PrÃ©-requisitos](#-prÃ©-requisitos)## ğŸ“‹ Ãndice## ğŸš€ Funcionalidades

- [InstalaÃ§Ã£o](#-instalaÃ§Ã£o)

- [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o)

- [Como Usar](#-como-usar)

- [Funcionalidades](#-funcionalidades)- [CaracterÃ­sticas](#-caracterÃ­sticas)### ğŸ’° Dashboard Financeiro

- [Estrutura do Projeto](#-estrutura-do-projeto)

- [SoluÃ§Ã£o de Problemas](#-soluÃ§Ã£o-de-problemas)- [Tecnologias](#-tecnologias)**Foco: GestÃ£o de Caixa e Pagamentos**

- [Requisitos de Sistema](#-requisitos-de-sistema)

- [Roadmap](#-roadmap)- [PrÃ©-requisitos](#-prÃ©-requisitos)

- [LicenÃ§a](#-licenÃ§a)

- [Autor](#-autor)- [InstalaÃ§Ã£o](#-instalaÃ§Ã£o)O dashboard financeiro concentra-se na gestÃ£o do fluxo de caixa e das operaÃ§Ãµes de pagamento e recebimento:



## âœ¨ CaracterÃ­sticas- [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o)



- ğŸ¤– **AnÃ¡lise de Documentos com IA**: ExtraÃ§Ã£o automÃ¡tica de dados de NFe, NFSe, e outros documentos fiscais usando IA (OpenAI GPT-4, Anthropic Claude, Google Gemini, Groq Llama)- [Como Usar](#-como-usar)- **Contas a Pagar**: Controle de fornecedores, boletos, despesas operacionais

- ğŸ“Š **Dashboard Completo**: VisualizaÃ§Ã£o em tempo real de contas a pagar/receber, situaÃ§Ã£o fiscal, e principais indicadores

- ğŸ‘¥ **Sistema Multi-UsuÃ¡rio**: NÃ­veis de acesso (Geral e Senior) com fluxo de aprovaÃ§Ãµes hierÃ¡rquico- [Funcionalidades](#-funcionalidades)- **Contas a Receber**: GestÃ£o de recebÃ­veis de clientes, notas fiscais

- âœ… **Fluxo de AprovaÃ§Ãµes**: AprovaÃ§Ã£o de uploads para usuÃ¡rios de nÃ­vel Geral

- ğŸ’¼ **GestÃ£o Completa**: Contas a pagar/receber, funcionÃ¡rios, terceiros, e documentos- [Estrutura do Projeto](#-estrutura-do-projeto)- **Contas BancÃ¡rias**: Saldos atuais e histÃ³rico de movimentaÃ§Ãµes

- ğŸ“ˆ **AnÃ¡lise TributÃ¡ria**: CÃ¡lculo automÃ¡tico de impostos (INSS, IRRF, ISS) com visualizaÃ§Ãµes

- ğŸ” **SeguranÃ§a**: Sistema de autenticaÃ§Ã£o com PBKDF2, recuperaÃ§Ã£o de senha, e controle de acesso- [SoluÃ§Ã£o de Problemas](#-soluÃ§Ã£o-de-problemas)- **Status AutomÃ¡tico**: 

- ğŸ“± **Responsivo**: Interface adaptÃ¡vel para desktop e mobile

- [Requisitos de Sistema](#-requisitos-de-sistema)  - **SituaÃ§Ã£o**: Pago/A Pagar (payables) | Recebido/A Receber (receivables)

## ğŸ›  Tecnologias

- [Roadmap](#-roadmap)  - **Status Temporal**: Em Dia | Com Atraso | Pendente

### Backend

- **Python 3.8+**- [LicenÃ§a](#-licenÃ§a)- **Agente IA Financeiro**: Especialista em matemÃ¡tica financeira, anÃ¡lise de fluxo de caixa, projeÃ§Ãµes e riscos

- **Streamlit**: Framework web

- **Supabase**: Banco de dados PostgreSQL + Storage- [Autor](#-autor)

- **python-dotenv**: Gerenciamento de variÃ¡veis de ambiente

### ğŸ“Š Dashboard ContÃ¡bil  

### InteligÃªncia Artificial

- **OpenAI GPT-4**: AnÃ¡lise de documentos## âœ¨ CaracterÃ­sticas**Foco: Contabilidade e Conformidade Fiscal**

- **Anthropic Claude**: AnÃ¡lise alternativa

- **Google Gemini**: AnÃ¡lise alternativa

- **Groq Llama**: AnÃ¡lise alternativa

- **Tesseract OCR**: ExtraÃ§Ã£o de texto de imagens- ğŸ¤– **AnÃ¡lise de Documentos com IA**: ExtraÃ§Ã£o automÃ¡tica de dados de NFe, NFSe, e outros documentos fiscais usando IA (OpenAI GPT-4, Anthropic Claude, Google Gemini)O dashboard contÃ¡bil trata dos aspectos contÃ¡beis e de compliance:



### Processamento de Documentos- ğŸ“Š **Dashboard Completo**: VisualizaÃ§Ã£o em tempo real de contas a pagar/receber, situaÃ§Ã£o fiscal, e principais indicadores

- **pdf2image**: ConversÃ£o PDF para imagem

- **pdfplumber**: ExtraÃ§Ã£o de texto de PDF- ğŸ‘¥ **Sistema Multi-UsuÃ¡rio**: NÃ­veis de acesso (Geral e Senior) com fluxo de aprovaÃ§Ãµes hierÃ¡rquico- **DRE (DemonstraÃ§Ã£o do Resultado do ExercÃ­cio)**: AnÃ¡lise de receitas, custos e despesas

- **pytesseract**: Interface Python para Tesseract

- **Pillow (PIL)**: ManipulaÃ§Ã£o de imagens- âœ… **Fluxo de AprovaÃ§Ãµes**: AprovaÃ§Ã£o de uploads para usuÃ¡rios de nÃ­vel Geral- **Plano de Contas**: Estrutura contÃ¡bil completa (ativo, passivo, receitas, despesas)



### VisualizaÃ§Ã£o- ğŸ’¼ **GestÃ£o Completa**: Contas a pagar/receber, funcionÃ¡rios, terceiros, e documentos- **LanÃ§amentos ContÃ¡beis**: Registro de dÃ©bitos e crÃ©ditos

- **Plotly**: GrÃ¡ficos interativos

- **Pandas**: ManipulaÃ§Ã£o de dados- ğŸ“ˆ **AnÃ¡lise TributÃ¡ria**: CÃ¡lculo automÃ¡tico de impostos (INSS, IRRF, ISS) com visualizaÃ§Ãµes- **ObrigaÃ§Ãµes Fiscais**: Acompanhamento de DCTF, SPED, DASN, etc.



## ğŸ“¦ PrÃ©-requisitos- ğŸ” **SeguranÃ§a**: Sistema de autenticaÃ§Ã£o com PBKDF2, recuperaÃ§Ã£o de senha, e controle de acesso- **Folha de Pagamento**: GestÃ£o de eventos trabalhistas e encargos



### Para ExecutÃ¡vel (UsuÃ¡rios Finais)- ğŸ“± **Responsivo**: Interface adaptÃ¡vel para desktop e mobile- **GrÃ¡ficos de EvoluÃ§Ã£o**: VisualizaÃ§Ã£o temporal de indicadores contÃ¡beis

- âœ… Windows 10/11 (64-bit)

- âœ… 8 GB RAM (mÃ­nimo)- **Agente IA ContÃ¡bil**: Expert em contabilidade, legislaÃ§Ã£o tributÃ¡ria e consultoria fiscal

- âœ… 500 MB espaÃ§o livre

- âœ… ConexÃ£o com internet## ğŸ›  Tecnologias

- âœ… Conta Supabase (gratuita)

- âœ… API Key de pelo menos um provedor de IA> **ğŸ“Œ DiferenÃ§a-chave**: O dashboard **financeiro** responde "Tenho dinheiro para pagar?", enquanto o dashboard **contÃ¡bil** responde "Qual foi meu resultado contÃ¡bil?" e "Estou em conformidade fiscal?"



### Para InstalaÃ§Ã£o Manual (Desenvolvedores)### Backend

- Python 3.8 ou superior

- pip (gerenciador de pacotes Python)- **Python 3.8+**## ğŸ› ï¸ InstalaÃ§Ã£o

- Tesseract OCR instalado

- Conta Supabase (gratuita)- **Streamlit**: Framework web

- API Key de pelo menos um provedor de IA

- **Supabase**: Banco de dados PostgreSQL + Storage```bash

## ğŸ“¥ InstalaÃ§Ã£o

- **python-dotenv**: Gerenciamento de variÃ¡veis de ambiente# 1. Clone o repositÃ³rio

### OpÃ§Ã£o 1: ExecutÃ¡vel (Recomendado para UsuÃ¡rios Finais)

git clone [seu-repositorio]

1. **Baixe o executÃ¡vel**:

   - Download: `CONT-AI.exe` (125 MB)### InteligÃªncia Artificial



2. **Crie o arquivo .env**:- **OpenAI GPT-4**: AnÃ¡lise de documentos# 2. Crie ambiente virtual

   - Crie um arquivo `.env` na mesma pasta do executÃ¡vel

   - Adicione apenas as credenciais do Supabase (veja [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o))- **Anthropic Claude**: AnÃ¡lise alternativapython -m venv venv



3. **Execute**:- **Google Gemini**: AnÃ¡lise alternativavenv\Scripts\activate  # Windows

   - Duplo clique em `CONT-AI.exe`

   - Aguarde a janela do navegador abrir automaticamente- **Tesseract OCR**: ExtraÃ§Ã£o de texto de imagenssource venv/bin/activate  # Linux/Mac

   - Acesso: `http://localhost:8502`



4. **Configure a IA**:

   - ApÃ³s login, configure a IA pela interface (veja [Como Usar](#-como-usar))### Processamento de Documentos# 3. Instale dependÃªncias



### OpÃ§Ã£o 2: InstalaÃ§Ã£o Manual (Desenvolvedores)- **pdf2image**: ConversÃ£o PDF para imagempip install -r requirements.txt



1. **Clone o repositÃ³rio**:- **pdfplumber**: ExtraÃ§Ã£o de texto de PDF

```bash

git clone https://github.com/seu-usuario/CONT-AI.git- **pytesseract**: Interface Python para Tesseract# 4. Configure variÃ¡veis de ambiente

cd CONT-AI

```- **Pillow (PIL)**: ManipulaÃ§Ã£o de imagens# Crie arquivo .env com:



2. **Crie um ambiente virtual**:SUPABASE_URL=sua_url_supabase

```bash

python -m venv venv### VisualizaÃ§Ã£oSUPABASE_KEY=sua_chave_supabase

```

- **Plotly**: GrÃ¡ficos interativos

3. **Ative o ambiente virtual**:

   - **Windows**:- **Pandas**: ManipulaÃ§Ã£o de dados# 5. Execute migraÃ§Ã£o do banco de dados

     ```powershell

     venv\Scripts\activate# No Supabase SQL Editor, execute:

     ```

   - **Linux/Mac**:## ğŸ“¦ PrÃ©-requisitossql_migrations/add_situacao_field.sql

     ```bash

     source venv/bin/activate

     ```

### Para ExecutÃ¡vel (UsuÃ¡rios Finais)# 6. Popule dados iniciais (opcional)

4. **Instale as dependÃªncias**:

```bash- âœ… Windows 10/11 (64-bit)python scripts/populate_complete_dataset.py

pip install -r requirements.txt

```- âœ… 8 GB RAM (mÃ­nimo)



5. **Configure o arquivo .env** (veja [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o))- âœ… 500 MB espaÃ§o livre# 7. Execute a aplicaÃ§Ã£o



6. **Execute o aplicativo**:- âœ… ConexÃ£o com internetstreamlit run app.py

```bash

streamlit run app.py```

```

### Para InstalaÃ§Ã£o Manual (Desenvolvedores)

7. **Acesse no navegador**:

   - URL: `http://localhost:8501` ou `http://localhost:8502`- Python 3.8 ou superior## ğŸ“ Estrutura do Projeto



## âš™ ConfiguraÃ§Ã£o- pip (gerenciador de pacotes Python)



### 1. ConfiguraÃ§Ã£o do Banco de Dados (Supabase)- Tesseract OCR instalado```



Crie um arquivo `.env` na raiz do projeto com **APENAS** as credenciais do Supabase:- Conta Supabase (gratuita)CONT-AI/



```env- API Key de pelo menos um provedor de IA (OpenAI, Anthropic ou Google)â”œâ”€â”€ app.py                          # AplicaÃ§Ã£o principal Streamlit

# Supabase (OBRIGATÃ“RIO)

SUPABASE_URL=sua_url_do_supabaseâ”œâ”€â”€ auth.py                         # AutenticaÃ§Ã£o de usuÃ¡rios

SUPABASE_KEY=sua_chave_do_supabase

```## ğŸ“¥ InstalaÃ§Ã£oâ”œâ”€â”€ database.py                     # FunÃ§Ãµes de banco de dados



**Como obter as credenciais:**â”œâ”€â”€ requirements.txt                # DependÃªncias Python

1. Acesse [supabase.com](https://supabase.com)

2. Crie um novo projeto (gratuito)### OpÃ§Ã£o 1: ExecutÃ¡vel (Recomendado para UsuÃ¡rios Finais)â”œâ”€â”€ .env                           # VariÃ¡veis de ambiente (nÃ£o versionado)

3. VÃ¡ em **Settings** â†’ **API**

4. Copie:â”œâ”€â”€ scripts/

   - `URL` â†’ `SUPABASE_URL`

   - `anon public` â†’ `SUPABASE_KEY`1. **Baixe o executÃ¡vel**:â”‚   â”œâ”€â”€ populate_complete_dataset.py  # Popular dados de exemplo



> âš ï¸ **Importante**: As API Keys de IA (OpenAI, Anthropic, Gemini, Groq) **NÃƒO** vÃ£o no `.env`. Elas sÃ£o configuradas diretamente na interface da plataforma apÃ³s o login.   - Download: `CONT-AI.exe`â”‚   â””â”€â”€ recalculate_statuses.py       # Recalcular status/situacao



**Estrutura de Tabelas NecessÃ¡rias:**â””â”€â”€ sql_migrations/



Execute os seguintes comandos SQL no Supabase SQL Editor:2. **Execute**:    â””â”€â”€ add_situacao_field.sql      # MigraÃ§Ã£o para campo situacao



```sql   - Duplo clique em `CONT-AI.exe````

-- Tabela de empresas

CREATE TABLE companies (   - Aguarde a janela do navegador abrir automaticamente

    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

    name TEXT NOT NULL,   - Acesso: `http://localhost:8502`

    cnpj TEXT UNIQUE NOT NULL,

    created_at TIMESTAMP DEFAULT NOW()## ğŸ—„ï¸ Banco de Dados

);

3. **Configure as API Keys** (veja [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o))

-- Tabela de usuÃ¡rios

CREATE TABLE users (### Estrutura de Dados

    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

    email TEXT UNIQUE NOT NULL,### OpÃ§Ã£o 2: InstalaÃ§Ã£o Manual (Desenvolvedores)

    password_hash TEXT NOT NULL,

    name TEXT NOT NULL,O sistema utiliza Supabase (PostgreSQL) com tabelas organizadas por domÃ­nio:

    company_id UUID REFERENCES companies(id),

    access_level TEXT DEFAULT 'geral',1. **Clone o repositÃ³rio**:

    is_active BOOLEAN DEFAULT TRUE,

    created_at TIMESTAMP DEFAULT NOW()```bash#### ğŸ“‹ Cadastros BÃ¡sicos

);

git clone https://github.com/seu-usuario/CONT-AI.git- **companies** - Empresas cadastradas (id, name, cnpj, tax_regime, logo_path)

-- Tabela de contas

CREATE TABLE bills (cd CONT-AI- **users** - UsuÃ¡rios do sistema (id, email, password_hash)

    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

    company_id UUID REFERENCES companies(id),```- **third_parties** - Clientes e fornecedores (id, company_id, name, cpf_cnpj, type)

    type TEXT NOT NULL,

    description TEXT,- **financial_categories** - Categorias de receitas/despesas (id, company_id, name, type)

    value NUMERIC,

    due_date DATE,2. **Crie um ambiente virtual**:

    status TEXT,

    category TEXT,```bash#### ğŸ’° MÃ³dulo Financeiro (GestÃ£o de Caixa)

    document_url TEXT,

    created_at TIMESTAMP DEFAULT NOW()python -m venv venv- **accounts_payable** - Contas a pagar

);

```  - Campos: id, company_id, description, amount, due_date, payment_date

-- Tabela de funcionÃ¡rios

CREATE TABLE employees (  - **situacao**: 'Pago' | 'A Pagar' (estado: foi pago?)

    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

    company_id UUID REFERENCES companies(id),3. **Ative o ambiente virtual**:  - **status**: 'Em Dia' | 'Com Atraso' | 'Pendente' (timing: quando foi pago?)

    name TEXT NOT NULL,

    cpf TEXT,   - **Windows**:  

    salary NUMERIC,

    admission_date DATE,     ```powershell- **accounts_receivable** - Contas a receber

    position TEXT,

    created_at TIMESTAMP DEFAULT NOW()     venv\Scripts\activate  - Campos: id, company_id, description, amount, due_date, receipt_date

);

     ```  - **situacao**: 'Recebido' | 'A Receber' (estado: foi recebido?)

-- Tabela de terceiros

CREATE TABLE third_parties (   - **Linux/Mac**:  - **status**: 'Em Dia' | 'Com Atraso' | 'Pendente' (timing: quando foi recebido?)

    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

    company_id UUID REFERENCES companies(id),     ```bash

    name TEXT NOT NULL,

    cnpj_cpf TEXT,     source venv/bin/activate- **bank_accounts** - Contas bancÃ¡rias (id, company_id, bank_name, account_number, balance)

    type TEXT,

    created_at TIMESTAMP DEFAULT NOW()     ```- **bank_account_balances** - HistÃ³rico de saldos (id, bank_account_id, balance, as_of_date)

);

- **bank_transactions** - TransaÃ§Ãµes bancÃ¡rias (id, bank_account_id, description, amount, date)

-- Tabela de requisiÃ§Ãµes de aprovaÃ§Ã£o

CREATE TABLE approval_requests (4. **Instale as dependÃªncias**:

    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

    company_id UUID REFERENCES companies(id),```bash#### ğŸ“Š MÃ³dulo ContÃ¡bil (EscrituraÃ§Ã£o e Compliance)

    requester_id UUID REFERENCES users(id),

    document_type TEXT,pip install -r requirements.txt- **chart_of_accounts** - Plano de contas contÃ¡bil

    document_data JSONB,

    status TEXT DEFAULT 'pending',```  - Estrutura hierÃ¡rquica: 1.Ativo, 2.Passivo, 3.PatrimÃ´nio LÃ­quido, 4.Receitas, 5.Despesas

    file_url TEXT,

    reviewed_by UUID REFERENCES users(id),  - Campos: id, company_id, account_code, account_name, account_type, parent_account_id

    reviewed_at TIMESTAMP,

    created_at TIMESTAMP DEFAULT NOW()5. **Configure o arquivo .env** (veja [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o))  

);

- **accounting_entries** - LanÃ§amentos contÃ¡beis

-- Tabela de cÃ³digos de recuperaÃ§Ã£o

CREATE TABLE recovery_codes (6. **Execute o aplicativo**:  - DÃ©bitos e crÃ©ditos seguindo o mÃ©todo das partidas dobradas

    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

    email TEXT NOT NULL,```bash  - Campos: id, company_id, entry_date, description, debit_account_id, credit_account_id, amount

    code TEXT NOT NULL,

    expires_at TIMESTAMP NOT NULL,streamlit run app.py

    used BOOLEAN DEFAULT FALSE,

    created_at TIMESTAMP DEFAULT NOW()```- **tax_obligations** - ObrigaÃ§Ãµes fiscais

);

```  - Tipos: DCTF, SPED, DASN, DARF, GPS, etc.



**ConfiguraÃ§Ã£o do Storage:**7. **Acesse no navegador**:  - Campos: id, company_id, obligation_type, reference_period, due_date, status

1. No Supabase, vÃ¡ em **Storage**

2. Crie um bucket chamado `documents`   - URL: `http://localhost:8501` ou `http://localhost:8502`

3. Defina as polÃ­ticas de acesso (pÃºblico ou privado conforme necessidade)

- **employees** - FuncionÃ¡rios (id, company_id, name, cpf, role, salary, admission_date)

### 2. ConfiguraÃ§Ã£o das APIs de IA (Na Plataforma)

## âš™ ConfiguraÃ§Ã£o- **payroll_events** - Eventos de folha de pagamento (id, employee_id, event_type, amount, event_date)

As API Keys de IA sÃ£o configuradas **diretamente na interface** apÃ³s o login:



1. **FaÃ§a login** na plataforma

2. **Na sidebar**, clique em **"ğŸ¤– Configurar IA"**### 1. ConfiguraÃ§Ã£o do Supabase### ğŸ“Œ Schema de SituaÃ§Ã£o e Status

3. **Escolha o modelo**:

   - Google Gemini

   - OpenAI GPT-4

   - Groq LlamaCrie um arquivo `.env` na raiz do projeto:**Importante**: Os valores no banco de dados estÃ£o em **PORTUGUÃŠS** (nÃ£o em snake_case ou inglÃªs).

   - Anthropic Claude

4. **Cole sua API Key** no campo

5. **Clique em "ğŸ”Œ Conectar"**

6. **Aguarde** a confirmaÃ§Ã£o **"ğŸŸ¢ IA Ativa"**```env#### Contas a Pagar (`accounts_payable`)



**Onde obter as API Keys:**# Supabase```

- **OpenAI**: [platform.openai.com/api-keys](https://platform.openai.com/api-keys)

- **Anthropic**: [console.anthropic.com](https://console.anthropic.com)SUPABASE_URL=sua_url_do_supabasesituacao: 'Pago' | 'A Pagar'

- **Google Gemini**: [makersuite.google.com/app/apikey](https://makersuite.google.com/app/apikey)

- **Groq**: [console.groq.com](https://console.groq.com)SUPABASE_KEY=sua_chave_do_supabase  â””â”€ Representa se a conta foi paga ou nÃ£o



> ğŸ’¡ **Dica**: VocÃª pode trocar de modelo a qualquer momento pela sidebar sem reiniciar a aplicaÃ§Ã£o.```



> âš ï¸ **Nota**: A configuraÃ§Ã£o da IA Ã© **por sessÃ£o**. Se fechar o navegador, precisarÃ¡ reconectar.status: 'Em Dia' | 'Com Atraso' | 'Pendente'  



### 3. ConfiguraÃ§Ã£o do Tesseract OCR**Como obter as credenciais:**  â”œâ”€ Em Dia: Pago antes/no vencimento



**Windows:**1. Acesse [supabase.com](https://supabase.com)  â”œâ”€ Com Atraso: Pago apÃ³s vencimento OU nÃ£o pago e jÃ¡ venceu

1. Baixe o instalador: [github.com/UB-Mannheim/tesseract/wiki](https://github.com/UB-Mannheim/tesseract/wiki)

2. Instale em `C:\Program Files\Tesseract-OCR`2. Crie um novo projeto (gratuito)  â””â”€ Pendente: NÃ£o pago e ainda dentro do prazo

3. Adicione ao PATH ou configure no cÃ³digo:

```python3. VÃ¡ em **Settings** â†’ **API**```

pytesseract.pytesseract.tesseract_cmd = r'C:\Program Files\Tesseract-OCR\tesseract.exe'

```4. Copie:



**Linux:**   - `URL` â†’ `SUPABASE_URL`#### Contas a Receber (`accounts_receivable`)

```bash

sudo apt-get install tesseract-ocr   - `anon public` â†’ `SUPABASE_KEY````

sudo apt-get install tesseract-ocr-por

```situacao: 'Recebido' | 'A Receber'



**Mac:****Estrutura de Tabelas NecessÃ¡rias:**  â””â”€ Representa se a conta foi recebida ou nÃ£o

```bash

brew install tesseract

brew install tesseract-lang

```Execute os seguintes comandos SQL no Supabase SQL Editor:status: 'Em Dia' | 'Com Atraso' | 'Pendente'



## ğŸ“– Como Usar  â”œâ”€ Em Dia: Recebido antes/no vencimento



### 1. Primeiro Acesso```sql  â”œâ”€ Com Atraso: Recebido apÃ³s vencimento OU nÃ£o recebido e jÃ¡ venceu



1. **Acesse o sistema**:-- Tabela de empresas  â””â”€ Pendente: NÃ£o recebido e ainda dentro do prazo

   - ExecutÃ¡vel: Duplo clique em `CONT-AI.exe`

   - Manual: `streamlit run app.py`CREATE TABLE companies (```



2. **Crie sua conta**:    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

   - Na tela de login, clique em **"Criar Nova Conta"**

   - Preencha: Nome, Email, Senha    name TEXT NOT NULL,**Constraints SQL**:

   - **Importante**: A primeira conta criada terÃ¡ acesso de **Senior**

    cnpj TEXT UNIQUE NOT NULL,```sql

3. **Configure sua empresa**:

   - ApÃ³s login, vÃ¡ em **"âš™ï¸ ConfiguraÃ§Ãµes"** â†’ **"Empresa"**    created_at TIMESTAMP DEFAULT NOW()-- Contas a Pagar

   - Cadastre: Nome da Empresa, CNPJ

);CHECK (situacao IN ('Pago', 'A Pagar'))

### 2. Configurar IA

CHECK (status IN ('Em Dia', 'Com Atraso', 'Pendente'))

1. **Conecte um modelo de IA**:

   - Na **sidebar**, clique em **"ğŸ¤– Configurar IA"**-- Tabela de usuÃ¡rios

   - Escolha: Google Gemini, OpenAI GPT-4, Anthropic Claude, ou Groq Llama

   - Cole sua API Key no campoCREATE TABLE users (-- Contas a Receber

   - Clique em **"ğŸ”Œ Conectar"**

   - Aguarde confirmaÃ§Ã£o **"ğŸŸ¢ IA Ativa"** na sidebar    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),CHECK (situacao IN ('Recebido', 'A Receber'))



> ğŸ’¡ **Importante**: VocÃª precisa configurar a IA em cada sessÃ£o (sempre que abrir o sistema).    email TEXT UNIQUE NOT NULL,CHECK (status IN ('Em Dia', 'Com Atraso', 'Pendente'))



### 3. Upload de Documentos    password_hash TEXT NOT NULL,```



**Para UsuÃ¡rios Senior:**    name TEXT NOT NULL,

1. VÃ¡ em **"ğŸ“¤ Upload de Documentos"** (na sidebar)

2. Arraste ou selecione o arquivo (PDF, JPG, PNG)    company_id UUID REFERENCES companies(id),### ğŸ”„ HistÃ³rico de MigraÃ§Ãµes

3. Escolha o tipo de documento (NFe, NFSe, Recibo, etc.)

4. Clique em **"Processar com IA"**    access_level TEXT DEFAULT 'geral',

5. Revise os dados extraÃ­dos

6. Confirme para salvar    is_active BOOLEAN DEFAULT TRUE,#### âœ… MigraÃ§Ã£o: NormalizaÃ§Ã£o para PortuguÃªs (Novembro 2025)



**Para UsuÃ¡rios Geral:**    created_at TIMESTAMP DEFAULT NOW()

1. Upload do documento (mesmos passos)

2. Sistema cria **RequisiÃ§Ã£o de AprovaÃ§Ã£o**);**MotivaÃ§Ã£o**: Eliminar camada de traduÃ§Ã£o entre banco de dados e interface.

3. Aguarde aprovaÃ§Ã£o de um usuÃ¡rio Senior

4. ApÃ³s aprovaÃ§Ã£o, documento Ã© processado



### 4. Gerenciar UsuÃ¡rios (Apenas Senior)-- Tabela de contas**MudanÃ§as**:



1. VÃ¡ em **"ğŸ‘¥ UsuÃ¡rios"**CREATE TABLE bills (- âŒ **Antes**: Valores em inglÃªs/snake_case no BD â†’ conversÃ£o em queries â†’ traduÃ§Ã£o no app â†’ display em portuguÃªs

2. Clique em **"Adicionar Novo UsuÃ¡rio"**

3. Preencha:    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),- âœ… **Depois**: Valores em portuguÃªs no BD â†’ leitura direta â†’ uso direto â†’ display em portuguÃªs

   - Nome

   - Email    company_id UUID REFERENCES companies(id),

   - Senha temporÃ¡ria

   - NÃ­vel de acesso (Geral ou Senior)    type TEXT NOT NULL,**Fluxo de Dados (Antigo)**:

4. Salve

    description TEXT,```

### 5. Aprovar Uploads (Apenas Senior)

    value NUMERIC,DB('paid','pending') â†’ Query(converte) â†’ App(traduz) â†’ Display('Pago','Pendente')

1. VÃ¡ em **"âœ… AprovaÃ§Ãµes"**

2. Visualize lista de requisiÃ§Ãµes pendentes    due_date DATE,```

3. Para cada requisiÃ§Ã£o:

   - Clique em **"Ver Documento"** para revisar    status TEXT,

   - Escolha: **Aprovar** ou **Rejeitar**

   - Documento aprovado Ã© processado automaticamente    category TEXT,**Fluxo de Dados (Novo)**:



### 6. Recuperar Senha    document_url TEXT,```



1. Na tela de login, clique em **"Esqueci minha senha"**    created_at TIMESTAMP DEFAULT NOW()DB('Pago','Pendente') â†’ Query(lÃª direto) â†’ App(usa direto) â†’ Display('Pago','Pendente')

2. Digite seu email cadastrado

3. Sistema gera cÃ³digo de 6 dÃ­gitos (exibido na tela));```

4. **Importante**: Copie o cÃ³digo imediatamente (vÃ¡lido por 30 minutos)

5. Clique em **"JÃ¡ tenho o cÃ³digo"**

6. Insira:

   - Email-- Tabela de funcionÃ¡rios**AlteraÃ§Ãµes Realizadas**:

   - CÃ³digo de 6 dÃ­gitos

   - Nova senha (mÃ­nimo 6 caracteres)CREATE TABLE employees (1. AtualizaÃ§Ã£o de valores no banco de dados

7. Confirme e faÃ§a login com a nova senha

    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),2. RemoÃ§Ã£o de funÃ§Ãµes de conversÃ£o em `database.py`

## ğŸ¯ Funcionalidades

    company_id UUID REFERENCES companies(id),3. AtualizaÃ§Ã£o de constraints para aceitar valores em portuguÃªs

### Dashboard

- ğŸ“Š Resumo financeiro (a pagar, a receber, saldo)    name TEXT NOT NULL,4. SimplificaÃ§Ã£o de lÃ³gica de filtros em `app.py`

- ğŸ“… Contas vencendo nos prÃ³ximos 7 dias

- ğŸ“ˆ GrÃ¡ficos de situaÃ§Ã£o fiscal    cpf TEXT,5. RemoÃ§Ã£o completa da camada de traduÃ§Ã£o

- ğŸ”” Alertas de vencimentos

    salary NUMERIC,

### Contas a Pagar/Receber

- â• Cadastro manual de contas    admission_date DATE,**BenefÃ­cios**:

- ğŸ“¤ Upload de documentos com extraÃ§Ã£o automÃ¡tica

- ğŸ“ EdiÃ§Ã£o e exclusÃ£o    position TEXT,- âœ… Menos processamento (sem conversÃµes)

- ğŸ” Filtros por status, categoria, perÃ­odo

- ğŸ’° CÃ¡lculo automÃ¡tico de impostos (INSS, IRRF, ISS)    created_at TIMESTAMP DEFAULT NOW()- âœ… Menos pontos de falha



### GestÃ£o de FuncionÃ¡rios);- âœ… CÃ³digo mais simples e manutenÃ­vel

- ğŸ‘¤ Cadastro completo (CPF, cargo, salÃ¡rio, admissÃ£o)

- ğŸ“Š VisualizaÃ§Ã£o em tabela- âœ… Performance melhorada

- âœï¸ EdiÃ§Ã£o de dados

- ğŸ—‘ï¸ ExclusÃ£o de registros-- Tabela de terceiros- âœ… Alinhamento completo BD â†” App â†” UI



### GestÃ£o de TerceirosCREATE TABLE third_parties (

- ğŸ¢ Cadastro de fornecedores e prestadores

- ğŸ“‹ InformaÃ§Ãµes de CNPJ/CPF    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

- ğŸ·ï¸ CategorizaÃ§Ã£o por tipo

    company_id UUID REFERENCES companies(id),## ğŸ¤– Agentes de IA

### Upload e Processamento

- ğŸ“„ Suporte a PDF, JPG, PNG    name TEXT NOT NULL,

- ğŸ¤– ExtraÃ§Ã£o automÃ¡tica via IA

- ğŸ” OCR para documentos escaneados    cnpj_cpf TEXT,### ğŸ’° Agente Financeiro

- âœ… ValidaÃ§Ã£o de dados extraÃ­dos

- ğŸ’¾ Armazenamento seguro no Supabase Storage    type TEXT,**Especialidade**: MatemÃ¡tica Financeira e GestÃ£o de Caixa



### SeguranÃ§a    created_at TIMESTAMP DEFAULT NOW()

- ğŸ” AutenticaÃ§Ã£o com hash PBKDF2 (100.000 iteraÃ§Ãµes)

- ğŸ‘¥ NÃ­veis de acesso (Geral, Senior));**Capacidades**:

- âœ… Fluxo de aprovaÃ§Ãµes

- ğŸ”‘ RecuperaÃ§Ã£o de senha com cÃ³digo de 6 dÃ­gitos- ğŸ“Š AnÃ¡lise de fluxo de caixa (entradas vs saÃ­das)

- ğŸ›¡ï¸ SessÃµes persistentes

-- Tabela de requisiÃ§Ãµes de aprovaÃ§Ã£o- ğŸ’³ GestÃ£o de contas a pagar e receber

## ğŸ“ Estrutura do Projeto

CREATE TABLE approval_requests (- ğŸ“ˆ ProjeÃ§Ãµes financeiras e anÃ¡lise de riscos

```

CONT-AI/    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),- ğŸ’° CÃ¡lculo de indicadores de liquidez

â”œâ”€â”€ app.py                  # AplicaÃ§Ã£o principal Streamlit

â”œâ”€â”€ database.py             # FunÃ§Ãµes de interaÃ§Ã£o com Supabase    company_id UUID REFERENCES companies(id),- ğŸ¯ SugestÃµes de otimizaÃ§Ã£o de capital de giro

â”œâ”€â”€ auth.py                 # AutenticaÃ§Ã£o e hash de senha

â”œâ”€â”€ launcher.py             # Entry point para executÃ¡vel    requester_id UUID REFERENCES users(id),

â”œâ”€â”€ CONT-AI.spec            # ConfiguraÃ§Ã£o PyInstaller

â”œâ”€â”€ build_exe.bat           # Script de build do executÃ¡vel    document_type TEXT,**Contexto de AtuaÃ§Ã£o**:

â”œâ”€â”€ requirements.txt        # DependÃªncias Python

â”œâ”€â”€ .env                    # VariÃ¡veis de ambiente (NÃƒO COMITAR!)    document_data JSONB,- PerÃ­odo analisado (mÃªs/ano)

â”œâ”€â”€ .env.example            # Template do .env

â”œâ”€â”€ .gitignore              # Arquivos ignorados pelo Git    status TEXT DEFAULT 'pending',- Contas pagas vs a pagar

â”œâ”€â”€ README.md               # Esta documentaÃ§Ã£o

â”œâ”€â”€ venv/                   # Ambiente virtual Python    file_url TEXT,- Contas recebidas vs a receber

â”œâ”€â”€ __pycache__/            # Cache Python

â”œâ”€â”€ build/                  # Arquivos temporÃ¡rios do build    reviewed_by UUID REFERENCES users(id),- Status temporal (em dia, com atraso, pendente)

â””â”€â”€ dist/                   # ExecutÃ¡vel gerado (apÃ³s build)

    â””â”€â”€ CONT-AI.exe         # ExecutÃ¡vel (125 MB)    reviewed_at TIMESTAMP,- Saldos bancÃ¡rios

```

    created_at TIMESTAMP DEFAULT NOW()

## ğŸ”§ SoluÃ§Ã£o de Problemas

);**Exemplo de Pergunta**: 

### Erro: "Cliente Supabase nÃ£o inicializado"

**Causa**: Credenciais Supabase invÃ¡lidas ou ausentes- "Qual o valor total de contas a pagar com atraso em 2024?"



**SoluÃ§Ã£o**:-- Tabela de cÃ³digos de recuperaÃ§Ã£o- "Quantas contas a receber estÃ£o pendentes para janeiro?"

1. Verifique o arquivo `.env`

2. Confirme que `SUPABASE_URL` e `SUPABASE_KEY` estÃ£o corretosCREATE TABLE recovery_codes (- "Qual meu fluxo de caixa projetado para o prÃ³ximo trimestre?"

3. Teste a conexÃ£o no Supabase Dashboard

    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

### Erro: "API Key nÃ£o configurada" ou "IA nÃ£o conectada"

**Causa**: Nenhum modelo de IA foi configurado na sessÃ£o    email TEXT NOT NULL,### ğŸ“Š Agente ContÃ¡bil



**SoluÃ§Ã£o**:    code TEXT NOT NULL,**Especialidade**: Contabilidade, LegislaÃ§Ã£o e Compliance Fiscal

1. **Na sidebar**, clique em **"ğŸ¤– Configurar IA"**

2. Escolha um modelo (OpenAI, Gemini, Anthropic, ou Groq)    expires_at TIMESTAMP NOT NULL,

3. Cole sua API Key vÃ¡lida

4. Clique em **"ğŸ”Œ Conectar"**    used BOOLEAN DEFAULT FALSE,**Capacidades**:

5. Verifique se aparece **"ğŸŸ¢ IA Ativa"** na sidebar

    created_at TIMESTAMP DEFAULT NOW()- ğŸ“‹ AnÃ¡lise de DRE (DemonstraÃ§Ã£o do Resultado do ExercÃ­cio)

> ğŸ’¡ **Nota**: A configuraÃ§Ã£o da IA Ã© **por sessÃ£o**. Se fechar o navegador, precisarÃ¡ reconectar.

);- ğŸ›ï¸ OrientaÃ§Ã£o sobre obrigaÃ§Ãµes fiscais (DCTF, SPED, DASN, etc.)

### Erro: "Tesseract nÃ£o encontrado"

**Causa**: Tesseract OCR nÃ£o instalado ou nÃ£o no PATH```- ğŸ“Š Consultoria tributÃ¡ria e planejamento fiscal



**SoluÃ§Ã£o Windows**:- ğŸ’¼ AnÃ¡lise de estrutura patrimonial (balanÃ§o)

1. Baixe: [github.com/UB-Mannheim/tesseract/wiki](https://github.com/UB-Mannheim/tesseract/wiki)

2. Instale em `C:\Program Files\Tesseract-OCR`**ConfiguraÃ§Ã£o do Storage:**- ğŸ“‘ InterpretaÃ§Ã£o de plano de contas

3. Adicione ao PATH do sistema

1. No Supabase, vÃ¡ em **Storage**- ğŸ‘¥ OrientaÃ§Ã£o sobre eventos de folha de pagamento

**SoluÃ§Ã£o Linux**:

```bash2. Crie um bucket chamado `documents`

sudo apt-get install tesseract-ocr tesseract-ocr-por

```3. Defina as polÃ­ticas de acesso (pÃºblico ou privado conforme necessidade)**Contexto de AtuaÃ§Ã£o**:



### Login nÃ£o funciona- Regime tributÃ¡rio da empresa (Simples, Lucro Real, Lucro Presumido)

**PossÃ­veis Causas**:

1. Senha incorreta### 2. ConfiguraÃ§Ã£o das APIs de IA- Plano de contas estruturado

2. Email nÃ£o cadastrado

3. UsuÃ¡rio inativo- LanÃ§amentos contÃ¡beis (dÃ©bito/crÃ©dito)



**SoluÃ§Ã£o**:Adicione pelo menos uma das seguintes chaves ao `.env`:- ObrigaÃ§Ãµes fiscais e prazos

1. Verifique email/senha

2. Use **"Esqueci minha senha"** para resetar- Eventos trabalhistas

3. Contate administrador para ativar conta

```env

### Upload falha ao processar documento

**PossÃ­veis Causas**:# OpenAI (Recomendado)**Exemplo de Pergunta**:

1. IA nÃ£o configurada

2. Arquivo corrompidoOPENAI_API_KEY=sua_chave_openai- "Qual foi meu resultado contÃ¡bil (lucro/prejuÃ­zo) em 2024?"

3. Formato nÃ£o suportado

4. API de IA sem crÃ©ditos- "Quais obrigaÃ§Ãµes fiscais vencem este mÃªs?"



**SoluÃ§Ã£o**:# OU Anthropic- "Como devo classificar contabilmente uma compra de equipamento?"

1. Configure a IA pela sidebar (ğŸ¤– Configurar IA)

2. Tente outro arquivoANTHROPIC_API_KEY=sua_chave_anthropic- "Qual o impacto tributÃ¡rio de contratar um novo funcionÃ¡rio?"

3. Use apenas PDF, JPG ou PNG

4. Verifique saldo da API no provedor de IA



## ğŸ’» Requisitos de Sistema# OU Google Gemini### ğŸ”„ IntegraÃ§Ã£o entre Agentes



### MÃ­nimoGEMINI_API_KEY=sua_chave_gemini

- **OS**: Windows 10 (64-bit), Linux, macOS

- **RAM**: 8 GB```Embora especializados em Ã¡reas diferentes, os agentes compartilham dados:

- **Processador**: Intel Core i5 ou equivalente

- **EspaÃ§o**: 500 MB livres

- **Internet**: ConexÃ£o estÃ¡vel (para APIs)

**Como obter:****Fluxo de InformaÃ§Ã£o**:

### Recomendado

- **OS**: Windows 11 (64-bit)- **OpenAI**: [platform.openai.com/api-keys](https://platform.openai.com/api-keys)```

- **RAM**: 16 GB

- **Processador**: Intel Core i7 ou equivalente- **Anthropic**: [console.anthropic.com](https://console.anthropic.com)â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

- **EspaÃ§o**: 2 GB livres

- **Internet**: ConexÃ£o de banda larga- **Google**: [makersuite.google.com/app/apikey](https://makersuite.google.com/app/apikey)â”‚  Agente Financeiro  â”‚ â—„â”€â”€â”€â”€â”€â–º â”‚   Agente ContÃ¡bil    â”‚



## ğŸ—º Roadmapâ”‚  (Caixa e Fluxo)    â”‚         â”‚  (Resultado e Fiscal)â”‚



### v2.0 (PrÃ³xima VersÃ£o)### 3. ConfiguraÃ§Ã£o do Tesseract OCRâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

- [ ] NotificaÃ§Ãµes por email

- [ ] RelatÃ³rios em PDF         â”‚                                â”‚

- [ ] IntegraÃ§Ã£o com bancos (open finance)

- [ ] Backup automÃ¡tico**Windows:**         â”œâ”€â”€ Contas a Pagar              â”œâ”€â”€ LanÃ§amentos

- [ ] Logs de auditoria

1. Baixe o instalador: [github.com/UB-Mannheim/tesseract/wiki](https://github.com/UB-Mannheim/tesseract/wiki)         â”œâ”€â”€ Contas a Receber            â”œâ”€â”€ Plano de Contas

### v2.1 (Futuro)

- [ ] App mobile (iOS/Android)2. Instale em `C:\Program Files\Tesseract-OCR`         â”œâ”€â”€ Saldos BancÃ¡rios            â”œâ”€â”€ ObrigaÃ§Ãµes Fiscais

- [ ] IntegraÃ§Ã£o com SPED

- [ ] Dashboard personalizado3. Adicione ao PATH ou configure no cÃ³digo:         â””â”€â”€ TransaÃ§Ãµes                  â””â”€â”€ Folha de Pagamento

- [ ] IA preditiva para fluxo de caixa

- [ ] Multi-empresa por usuÃ¡rio```python```



## ğŸ“¦ DistribuiÃ§Ã£opytesseract.pytesseract.tesseract_cmd = r'C:\Program Files\Tesseract-OCR\tesseract.exe'



### Para Distribuir o ExecutÃ¡vel:```**Exemplo de Pergunta Integrada**: 



1. **Gerar Build:**- "Tenho dinheiro em caixa para pagar os impostos que vencem este mÃªs?" 

   ```batch

   build_exe.bat**Linux:**  â†’ Requer dados **financeiros** (saldo) + **contÃ¡beis** (obrigaÃ§Ãµes fiscais)

   ```

```bash

2. **Incluir na DistribuiÃ§Ã£o:**

   - `dist/CONT-AI.exe` (executÃ¡vel)sudo apt-get install tesseract-ocr

   - `.env.example` (template apenas com Supabase)

   - `README.md` (instruÃ§Ãµes completas)sudo apt-get install tesseract-ocr-por## ğŸ“š DocumentaÃ§Ã£o Adicional



3. **InstruÃ§Ãµes para UsuÃ¡rio Final:**```

   - Baixar CONT-AI.exe

   - Criar arquivo `.env` com credenciais Supabase- `README_MIGRACAO_SITUACAO.md` - Detalhes tÃ©cnicos sobre migraÃ§Ã£o do campo situacao

   - Duplo clique no executÃ¡vel

   - ApÃ³s login, configurar IA pela interface (Sidebar â†’ ğŸ¤– Configurar IA)**Mac:**- Logs de debug disponÃ­veis durante execuÃ§Ã£o (procure por `ğŸ”´ DEBUG` no terminal)



## ğŸ“„ LicenÃ§a```bash



Este projeto Ã© de propriedade privada. Todos os direitos reservados.brew install tesseract## ğŸ› Troubleshooting



**Proibido**:brew install tesseract-lang

- âŒ RedistribuiÃ§Ã£o

- âŒ Uso comercial sem autorizaÃ§Ã£o```### Agente IA retorna dados zerados

- âŒ ModificaÃ§Ã£o sem autorizaÃ§Ã£o



**Permitido**:

- âœ… Uso pessoal### Arquivo .env Completo (Exemplo)**Sintoma**: Dashboard mostra valores corretos, mas agente retorna "0 contas" ou valores zerados.

- âœ… Teste e avaliaÃ§Ã£o

- âœ… Uso comercial com licenÃ§a



Para adquirir licenÃ§a comercial, entre em contato: leo.cvsm@hotmail.com```env**Causa Comum**: ConfusÃ£o entre terminologia "atrasadas" vs "nÃ£o pagas".



## ğŸ‘¤ Autor# Supabase



**Leonel Carvalho**SUPABASE_URL=https://xxxxxxxxxxx.supabase.co**SoluÃ§Ã£o**:

- ğŸ“§ Email: leo.cvsm@hotmail.com

- ğŸ’¼ LinkedIn: [linkedin.com/in/leonelcarvalho](https://linkedin.com/in/leonelcarvalho)SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...1. Verifique os logs no terminal - procure por:

- ğŸ™ GitHub: [github.com/leonelcarvalho](https://github.com/leonelcarvalho)

   ```

## ğŸ¤ Contribuindo

# IA (escolha pelo menos uma)   ğŸ”´ DEBUG - CONTAS COM ATRASO DETECTADAS

Este Ã© um projeto privado. ContribuiÃ§Ãµes sÃ£o aceitas mediante aprovaÃ§Ã£o prÃ©via.

OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxx   ğŸ” DEBUG - PerÃ­odo ajustado

**Para sugerir melhorias**:

1. Envie email para leo.cvsm@hotmail.comANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxxxxxxxxxxx   ğŸ¤– DEBUG - DADOS QUE SERÃƒO ENVIADOS AO AGENTE

2. Descreva a melhoria ou bug

3. Aguarde respostaGEMINI_API_KEY=AIzaSyxxxxxxxxxxxxxxxxxxxxx   ```



---```



**Desenvolvido com â¤ï¸ usando Python, Streamlit e IA**2. Verifique se o perÃ­odo foi corretamente detectado:



*Ãšltima atualizaÃ§Ã£o: Novembro 2024*## ğŸ“– Como Usar   - Se perguntar "em 2024", o agente deve ajustar para o ano completo


   - Logs mostrarÃ£o: `PerÃ­odo ajustado para: 2024-01-01 a 2024-12-31`

### 1. Primeiro Acesso

3. Execute a pergunta de forma explÃ­cita:

1. **Acesse o sistema**:   ```

   - ExecutÃ¡vel: Duplo clique em `CONT-AI.exe`   âŒ Evite: "Quantas contas vencidas?"

   - Manual: `streamlit run app.py`   âœ… Prefira: "Qual o valor de contas a pagar com atraso em 2024?"

   ```

2. **Crie sua conta**:

   - Na tela de login, clique em **"Criar Nova Conta"**### Dashboard mostra dados corretos, agente nÃ£o

   - Preencha: Nome, Email, Senha

   - **Importante**: A primeira conta criada terÃ¡ acesso de **Administrador****Causa**: DiferenÃ§a entre perÃ­odo do dashboard vs perÃ­odo da pergunta.



3. **Configure sua empresa**:**VerificaÃ§Ã£o**:

   - ApÃ³s login, vÃ¡ em **"âš™ï¸ ConfiguraÃ§Ãµes"** â†’ **"Empresa"**- Dashboard pode estar mostrando "todos os perÃ­odos"

   - Cadastre: Nome da Empresa, CNPJ- Agente responde ao perÃ­odo especÃ­fico da pergunta

- Compare os filtros aplicados

### 2. Configurar IA

**SoluÃ§Ã£o**: Especifique o perÃ­odo na pergunta:

1. **Escolha o modelo**:```

   - VÃ¡ em **"âš™ï¸ ConfiguraÃ§Ãµes"** â†’ **"Configurar IA"**"Qual o total de contas a pagar com atraso no perÃ­odo de janeiro a marÃ§o de 2024?"

   - Selecione: OpenAI GPT-4, Anthropic Claude, ou Google Gemini```

   - Confirme que a API Key estÃ¡ configurada no `.env`

### Erro: check constraint violation

### 3. Upload de Documentos

**Sintoma**: Ao inserir/atualizar registro, erro `violates check constraint`.

**Para UsuÃ¡rios Senior:**

1. VÃ¡ em **"ğŸ“¤ Upload de Documentos"****Causa**: Tentativa de inserir valores em inglÃªs/snake_case em campos que aceitam apenas portuguÃªs.

2. Arraste ou selecione o arquivo (PDF, JPG, PNG)

3. Escolha o tipo de documento (NFe, NFSe, Recibo, etc.)**SoluÃ§Ã£o**: Execute a migraÃ§Ã£o de valores:

4. Clique em **"Processar com IA"**```sql

5. Revise os dados extraÃ­dos-- Atualizar valores para portuguÃªs

6. Confirme para salvarUPDATE accounts_payable 

SET situacao = CASE 

**Para UsuÃ¡rios Geral:**    WHEN payment_date IS NOT NULL THEN 'Pago' 

1. Upload do documento (mesmos passos)    ELSE 'A Pagar' 

2. Sistema cria **RequisiÃ§Ã£o de AprovaÃ§Ã£o**END,

3. Aguarde aprovaÃ§Ã£o de um usuÃ¡rio Seniorstatus = CASE 

4. ApÃ³s aprovaÃ§Ã£o, documento Ã© processado    WHEN payment_date IS NOT NULL AND payment_date <= due_date THEN 'Em Dia'

    WHEN payment_date IS NOT NULL AND payment_date > due_date THEN 'Com Atraso'

### 4. Gerenciar UsuÃ¡rios (Apenas Senior)    WHEN payment_date IS NULL AND CURRENT_DATE > due_date THEN 'Com Atraso'

    ELSE 'Pendente'

1. VÃ¡ em **"ğŸ‘¥ UsuÃ¡rios"**END;

2. Clique em **"Adicionar Novo UsuÃ¡rio"**

3. Preencha:-- Verificar valores atualizados

   - NomeSELECT DISTINCT situacao, status FROM accounts_payable;

   - Email-- Deve retornar apenas valores em portuguÃªs

   - Senha temporÃ¡ria```

   - NÃ­vel de acesso (Geral ou Senior)

4. UsuÃ¡rio receberÃ¡ credenciais por email (se configurado)## ğŸ“ Contribuindo



### 5. Aprovar Uploads (Apenas Senior)Ao fazer alteraÃ§Ãµes no cÃ³digo:



1. VÃ¡ em **"âœ… AprovaÃ§Ãµes"**1. **Mantenha valores em portuguÃªs** no banco de dados

2. Visualize lista de requisiÃ§Ãµes pendentes2. **NÃ£o adicione camadas de traduÃ§Ã£o** - leia valores diretamente

3. Para cada requisiÃ§Ã£o:3. **Use DEBUG logs** para diagnosticar problemas de dados

   - Clique em **"Ver Documento"** para revisar4. **Documente mudanÃ§as** no schema ou fluxo de dados

   - Escolha: **Aprovar** ou **Rejeitar**

   - Documento aprovado Ã© processado automaticamente

## ğŸ”§ Tecnologias

### 6. Recuperar Senha

- **Frontend**: Streamlit

1. Na tela de login, clique em **"Esqueci minha senha"**- **Backend**: Python 3.11+

2. Digite seu email cadastrado- **Banco de Dados**: Supabase (PostgreSQL)

3. Sistema gera cÃ³digo de 6 dÃ­gitos (exibido na tela)- **IA**: Google Gemini, OpenAI GPT-4, Groq, Anthropic Claude

4. **Importante**: Copie o cÃ³digo imediatamente (vÃ¡lido por 30 minutos)- **GrÃ¡ficos**: Plotly

5. Clique em **"JÃ¡ tenho o cÃ³digo"**- **ManipulaÃ§Ã£o de Dados**: Pandas

6. Insira:

   - Email## ï¿½ LicenÃ§a

   - CÃ³digo de 6 dÃ­gitos

   - Nova senha (mÃ­nimo 6 caracteres)Projeto educacional - I2A2 Course

7. Confirme e faÃ§a login com a nova senha

## ğŸ‘¨â€ï¿½ Autor

## ğŸ¯ Funcionalidades

Leonel - Desafio Final I2A2 Course

### Dashboard

- ğŸ“Š Resumo financeiro (a pagar, a receber, saldo)
- ğŸ“… Contas vencendo nos prÃ³ximos 7 dias
- ğŸ“ˆ GrÃ¡ficos de situaÃ§Ã£o fiscal
- ğŸ”” Alertas de vencimentos

### Contas a Pagar/Receber
- â• Cadastro manual de contas
- ğŸ“¤ Upload de documentos com extraÃ§Ã£o automÃ¡tica
- ğŸ“ EdiÃ§Ã£o e exclusÃ£o
- ğŸ” Filtros por status, categoria, perÃ­odo
- ğŸ’° CÃ¡lculo automÃ¡tico de impostos (INSS, IRRF, ISS)

### GestÃ£o de FuncionÃ¡rios
- ğŸ‘¤ Cadastro completo (CPF, cargo, salÃ¡rio, admissÃ£o)
- ğŸ“Š VisualizaÃ§Ã£o em tabela
- âœï¸ EdiÃ§Ã£o de dados
- ğŸ—‘ï¸ ExclusÃ£o de registros

### GestÃ£o de Terceiros
- ğŸ¢ Cadastro de fornecedores e prestadores
- ğŸ“‹ InformaÃ§Ãµes de CNPJ/CPF
- ğŸ·ï¸ CategorizaÃ§Ã£o por tipo

### Upload e Processamento
- ğŸ“„ Suporte a PDF, JPG, PNG
- ğŸ¤– ExtraÃ§Ã£o automÃ¡tica via IA
- ğŸ” OCR para documentos escaneados
- âœ… ValidaÃ§Ã£o de dados extraÃ­dos
- ğŸ’¾ Armazenamento seguro no Supabase Storage

### SeguranÃ§a
- ğŸ” AutenticaÃ§Ã£o com hash PBKDF2 (100.000 iteraÃ§Ãµes)
- ğŸ‘¥ NÃ­veis de acesso (Geral, Senior)
- âœ… Fluxo de aprovaÃ§Ãµes
- ğŸ”‘ RecuperaÃ§Ã£o de senha com cÃ³digo de 6 dÃ­gitos
- ğŸ›¡ï¸ SessÃµes persistentes

## ğŸ“ Estrutura do Projeto

```
CONT-AI/
â”œâ”€â”€ app.py                  # AplicaÃ§Ã£o principal Streamlit
â”œâ”€â”€ database.py             # FunÃ§Ãµes de interaÃ§Ã£o com Supabase
â”œâ”€â”€ auth.py                 # AutenticaÃ§Ã£o e hash de senha
â”œâ”€â”€ launcher.py             # Entry point para executÃ¡vel
â”œâ”€â”€ CONT-AI.spec            # ConfiguraÃ§Ã£o PyInstaller
â”œâ”€â”€ build_exe.bat           # Script de build do executÃ¡vel
â”œâ”€â”€ requirements.txt        # DependÃªncias Python
â”œâ”€â”€ .env                    # VariÃ¡veis de ambiente (nÃ£o comitar!)
â”œâ”€â”€ .gitignore              # Arquivos ignorados pelo Git
â”œâ”€â”€ README.md               # Esta documentaÃ§Ã£o
â”œâ”€â”€ venv/                   # Ambiente virtual Python
â”œâ”€â”€ __pycache__/            # Cache Python
â””â”€â”€ dist/                   # ExecutÃ¡vel gerado (apÃ³s build)
    â””â”€â”€ CONT-AI.exe
```

## ğŸ”§ SoluÃ§Ã£o de Problemas

### Erro: "Cliente Supabase nÃ£o inicializado"
**Causa**: Credenciais Supabase invÃ¡lidas ou ausentes

**SoluÃ§Ã£o**:
1. Verifique o arquivo `.env`
2. Confirme que `SUPABASE_URL` e `SUPABASE_KEY` estÃ£o corretos
3. Teste a conexÃ£o no Supabase Dashboard

### Erro: "API Key nÃ£o configurada" ou "IA nÃ£o conectada"
**Causa**: Nenhum modelo de IA foi configurado na sessÃ£o

**SoluÃ§Ã£o**:
1. **Na sidebar**, clique em **"ğŸ¤– Configurar IA"**
2. Escolha um modelo (OpenAI, Gemini, Anthropic, ou Groq)
3. Cole sua API Key vÃ¡lida
4. Clique em **"ğŸ”Œ Conectar"**
5. Verifique se aparece **"ğŸŸ¢ IA Ativa"** na sidebar

> ğŸ’¡ **Nota**: A configuraÃ§Ã£o da IA Ã© **por sessÃ£o**. Se fechar o navegador, precisarÃ¡ reconectar.

### Erro: "Tesseract nÃ£o encontrado"
**Causa**: Tesseract OCR nÃ£o instalado ou nÃ£o no PATH

**SoluÃ§Ã£o Windows**:
1. Baixe: [github.com/UB-Mannheim/tesseract/wiki](https://github.com/UB-Mannheim/tesseract/wiki)
2. Instale em `C:\Program Files\Tesseract-OCR`
3. Adicione ao PATH do sistema

**SoluÃ§Ã£o Linux**:
```bash
sudo apt-get install tesseract-ocr tesseract-ocr-por
```

### Login nÃ£o funciona
**PossÃ­veis Causas**:
1. Senha incorreta
2. Email nÃ£o cadastrado
3. UsuÃ¡rio inativo

**SoluÃ§Ã£o**:
1. Verifique email/senha
2. Use **"Esqueci minha senha"** para resetar
3. Contate administrador para ativar conta

### Upload falha ao processar documento
**PossÃ­veis Causas**:
1. Arquivo corrompido
2. Formato nÃ£o suportado
3. API de IA sem crÃ©ditos

**SoluÃ§Ã£o**:
1. Tente outro arquivo
2. Use PDF, JPG ou PNG
3. Verifique saldo da API no provedor de IA

## ğŸ’» Requisitos de Sistema

### MÃ­nimo
- **OS**: Windows 10 (64-bit), Linux, macOS
- **RAM**: 8 GB
- **Processador**: Intel Core i5 ou equivalente
- **EspaÃ§o**: 500 MB livres
- **Internet**: ConexÃ£o estÃ¡vel (para APIs)

### Recomendado
- **OS**: Windows 11 (64-bit)
- **RAM**: 16 GB
- **Processador**: Intel Core i7 ou equivalente
- **EspaÃ§o**: 2 GB livres
- **Internet**: ConexÃ£o de banda larga

## ğŸ—º Roadmap

### v2.0 (PrÃ³xima VersÃ£o)
- [ ] NotificaÃ§Ãµes por email
- [ ] RelatÃ³rios em PDF
- [ ] IntegraÃ§Ã£o com bancos (open finance)
- [ ] Backup automÃ¡tico
- [ ] Logs de auditoria

### v2.1 (Futuro)
- [ ] App mobile (iOS/Android)
- [ ] IntegraÃ§Ã£o com SPED
- [ ] Dashboard personalizado
- [ ] IA preditiva para fluxo de caixa
- [ ] Multi-empresa por usuÃ¡rio

## ğŸ“„ LicenÃ§a

Este projeto Ã© de propriedade privada. Todos os direitos reservados.

**Proibido**:
- âŒ RedistribuiÃ§Ã£o
- âŒ Uso comercial sem autorizaÃ§Ã£o
- âŒ ModificaÃ§Ã£o sem autorizaÃ§Ã£o

**Permitido**:
- âœ… Uso pessoal
- âœ… Teste e avaliaÃ§Ã£o
- âœ… Uso comercial com licenÃ§a

Para adquirir licenÃ§a comercial, entre em contato: leo.cvsm@hotmail.com

## ğŸ‘¤ Autor

**Leonel Carvalho**
- ğŸ“§ Email: leo.cvsm@hotmail.com
- ğŸ’¼ LinkedIn: [linkedin.com/in/leonelcarvalho](https://linkedin.com/in/leonelcarvalho)
- ğŸ™ GitHub: [github.com/leonelcarvalho](https://github.com/leonelcarvalho)

## ğŸ¤ Contribuindo

Este Ã© um projeto privado. ContribuiÃ§Ãµes sÃ£o aceitas mediante aprovaÃ§Ã£o prÃ©via.

**Para sugerir melhorias**:
1. Envie email para leo.cvsm@hotmail.com
2. Descreva a melhoria ou bug
3. Aguarde resposta

---

**Desenvolvido com â¤ï¸ usando Python, Streamlit e IA**

*Ãšltima atualizaÃ§Ã£o: Novembro 2024*
